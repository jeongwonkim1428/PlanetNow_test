<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout.html}">



<head>
    <script>
        $(function () {
            $("#search").on("input", function () {  // input 이벤트로 변경
                let search = $(this).val();


                if (search.length > 0) {  // 입력값이 있을 때만 요청
                    $.ajax({
                        type: "get",
                        url: "/user/name",
                        data: { "search": search },  // 파라미터 이름 맞춤
                        success: function (users) {
                            let userTable = "";
                            users.forEach(user => {
                                let imgSrc = `/user/thumbnails?fileName=${user.profileUuid}`;
                                userTable += `
                           <tr>
                               <td>
                                   <img src="${imgSrc}" width="90" height="90" alt="프로필 이미지">
                                   <div>
                                       <h6>${user.name}</h6>
                                       <div>${user.ambitionQuote}</div>
                                   </div>
                               </td>
                               <td>${user.postCount}개</td>
                               <td>${user.commentCount}개</td>
                               <td>${user.followers}명</td>
                               <td>
                                   <input type="button" class="site-btn" value="팔로우">
                               </td>
                           </tr>
                       `;
                            });
                            $("tbody").html(userTable);
                        }
                    });
                } else {
                    $("tbody").html(`
               <tr id="noResults">
                   <td colspan="5" style="text-align: center;">검색하고 싶은 유저를 검색해주세요</td>
               </tr>
           `);
                }
            });
        });


    </script>


    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Cookie&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&display=swap"
          rel="stylesheet">



</head>


<body>
<div layout:fragment="content">

<!-- Breadcrumb Begin -->
<div class="breadcrumb-option">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb__links">
                    <a href="./index.html"><i class="fa fa-home"></i> Home</a>
                    <span>유저 검색</span>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Breadcrumb End -->


<!-- Shop Cart Section Begin -->
<section class="shop-cart spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="shop__cart__table">
                    <table>
                        <legend><strong>유저 검색</strong></legend>
                        <thead>
                        <tr align="right">
                            <td colspan="5" align="right" >
                                <div class="col-lg-6">
                                    <div class="discount__content">
                                        <form action="#">
                                            <input type="text" id="search" name="search" placeholder="유저 이름 검색창"><br></br>


                                        </form>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        </thead>
                        <thead>
                        <tr>
                            <th>유저</th>
                            <th>게시글 개수</th>
                            <th>댓글 개수</th>
                            <th>팔로우 수</th>
                            <th class="row">팔로우 버튼</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr id="noResults">
                            <td colspan="5" style="text-align: center;">검색하고 싶은 유저를 검색해주세요</td>
                        </tr>


                        <!--                                <tr>-->
                        <!--                                    -->
                        <!--                                    <td class="cart__product__item">-->
                        <!--                                        <img th:src="@{#}" width="90" height="90" alt="">-->
                        <!--                                        <div class="cart__product__item__title">-->
                        <!--                                            <h6 >유저1</h6>-->
                        <!--                                            <div >포부에 대한 내용</div>-->
                        <!--                                        </div>-->
                        <!--                                    </td>-->
                        <!--                                    <td >예 : 100개(게시글개수)</td>-->
                        <!--                                    <td >예 : 10개(댓글개수)</td>-->
                        <!--                                    <td >1000(팔로우)</td>-->
                        <!--                                    <td>-->
                        <!--                                        <input type="button" class="site-btn" value="팔로우">-->
                        <!--                                    </td>-->
                        <!--                                </tr>-->


                        </tbody>
                    </table>


                </div>
            </div>
        </div>
    </div>
</section>
<!-- Shop Cart Section End -->


</div>
</body>


</html>

